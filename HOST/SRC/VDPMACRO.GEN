; MACRO.GEN

VDP_IE1_ON	MACRO

	; CR0.IE1 = 1
	ld a,(RG0SAV)
	or %00010000	; IE1 = 1
	ld (RG0SAV),a
	out (099H),a
	ld a,080h		; R#0 = 0 + 0x80
	out (099H),a

	ENDM

VDP_IE1_OFF	MACRO

	; CR0.IE1 = 0
	ld a,(RG0SAV)
	and %11101111	; IE1 = 0
	ld (RG0SAV),a
	out (099H),a
	ld a,080h		; R#0 = 0 + 0x80
	out (099H),a

	ENDM

Wait_HBLANK		MACRO

_OFST defl $
    in a,(099h)
    and %00100000
    jp nz,_OFST

_OFST defl $
    in a,(099h)
    and %00100000
    jp z,_OFST

	ENDM

; EOF
